<div [@dialogPop] class="admin-dialog admin-dialog--large">
  <!-- Header -->
  <div class="admin-dialog__header">
    <div class="admin-dialog__icon">
      <i class="pi pi-user-plus"></i>
    </div>
    <div class="admin-dialog__title">
      <h2>Novi zaposleni</h2>
      <p>Unesite podatke o novom zaposlenom</p>
    </div>
  </div>
  
  <!-- Content -->
  <div class="admin-dialog__content">
    <form [formGroup]="employeeForm" class="form-grid">
      <!-- Avatar Upload Section - full width -->
      <div class="form-field full-width">
        <label class="field-label">
          <i class="pi pi-image"></i>
          Profilna slika
        </label>
        <div class="avatar-upload-container">
          <img
            [src]="avatarPreview || 'user-profile-image.png'"
            alt="Profilna slika"
            class="avatar-preview"
            (click)="onAvatarClick()"
          />
          <div class="avatar-upload-info">
            <p-button 
              label="Izaberi sliku" 
              icon="pi pi-upload"
              [outlined]="true"
              (onClick)="onAvatarClick()">
            </p-button>
            <small class="field-hint">Kliknite na sliku ili dugme za upload</small>
          </div>
          <input
            id="avatarInput"
            type="file"
            accept="image/*"
            style="display: none"
            (change)="onAvatarSelected($event)"
          />
        </div>
      </div>

      <!-- First Name -->
      <div class="form-field">
        <label class="field-label">
          <i class="pi pi-user"></i>
          Ime
        </label>
        <input 
          pInputText 
          formControlName="firstName" 
          placeholder="Unesite ime"
          class="p-inputtext-lg w-full" />
        <small class="p-error" *ngIf="employeeForm.controls['firstName'].touched && employeeForm.controls['firstName'].hasError('required')">
          Ime je obavezno
        </small>
      </div>

      <!-- Last Name -->
      <div class="form-field">
        <label class="field-label">
          <i class="pi pi-user"></i>
          Prezime
        </label>
        <input 
          pInputText 
          formControlName="lastName" 
          placeholder="Unesite prezime"
          class="p-inputtext-lg w-full" />
        <small class="p-error" *ngIf="employeeForm.controls['lastName'].touched && employeeForm.controls['lastName'].hasError('required')">
          Prezime je obavezno
        </small>
      </div>

      <!-- Email -->
      <div class="form-field">
        <label class="field-label">
          <i class="pi pi-envelope"></i>
          Email
        </label>
        <input 
          pInputText 
          type="email"
          formControlName="contactEmail" 
          placeholder="primer@email.com"
          class="p-inputtext-lg w-full" />
        <small class="p-error" *ngIf="employeeForm.controls['contactEmail'].touched && employeeForm.controls['contactEmail'].hasError('required')">
          Email je obavezan
        </small>
        <small class="p-error" *ngIf="employeeForm.controls['contactEmail'].touched && employeeForm.controls['contactEmail'].hasError('email')">
          Unesite validan email
        </small>
      </div>

      <!-- Phone -->
      <div class="form-field">
        <label class="field-label">
          <i class="pi pi-phone"></i>
          Telefon
        </label>
        <input 
          pInputText 
          type="tel"
          formControlName="contactPhone" 
          placeholder="0601234567"
          class="p-inputtext-lg w-full" />
        <small class="field-hint">Mora biti 10 cifara</small>
        <small class="p-error" *ngIf="employeeForm.controls['contactPhone'].touched && employeeForm.controls['contactPhone'].hasError('required')">
          Telefon je obavezan
        </small>
        <small class="p-error" *ngIf="employeeForm.controls['contactPhone'].touched && employeeForm.controls['contactPhone'].hasError('pattern')">
          Unesite validan broj telefona
        </small>
      </div>

      <!-- Date of Birth -->
      <div class="form-field">
        <label class="field-label">
          <i class="pi pi-calendar"></i>
          Datum rođenja
        </label>
        <p-datepicker 
          formControlName="dateOfBirth"
          dateFormat="dd.mm.yy"
          placeholder="Izaberite datum"
          [appendTo]="'body'"
          styleClass="w-full">
        </p-datepicker>
        <small class="p-error" *ngIf="employeeForm.controls['dateOfBirth'].touched && employeeForm.controls['dateOfBirth'].hasError('required')">
          Datum rođenja je obavezan
        </small>
      </div>

      <!-- Job Role -->
      <div class="form-field">
        <label class="field-label">
          <i class="pi pi-briefcase"></i>
          Pozicija
        </label>
        <input 
          pInputText 
          formControlName="jobRole" 
          placeholder="Frizer, Maser..."
          class="p-inputtext-lg w-full" />
        <small class="p-error" *ngIf="employeeForm.controls['jobRole'].touched && employeeForm.controls['jobRole'].hasError('required')">
          Pozicija je obavezna
        </small>
      </div>

      <!-- Facilities Multi-Selector - full width -->
      <div class="form-field full-width">
        <label class="field-label">
          <i class="pi pi-building"></i>
          Objekti
        </label>
        <p-multiSelect 
          formControlName="facilities"
          [options]="facilityOptions"
          optionLabel="label"
          optionValue="value"
          placeholder="Izaberite objekte"
          display="chip"
          [appendTo]="'body'"
          styleClass="w-full">
        </p-multiSelect>
        <small class="field-hint">Izaberite jedan ili više objekata gde zaposleni radi</small>
      </div>

      <!-- Active -->
      <div class="form-field">
        <label class="field-label">
          <i class="pi pi-check-circle"></i>
          Aktivan
        </label>
        <p-select 
          formControlName="isActive"
          [options]="[
            {label: 'Da', value: true},
            {label: 'Ne', value: false}
          ]"
          optionLabel="label"
          optionValue="value"
          placeholder="Izaberite status"
          styleClass="w-full">
        </p-select>
      </div>

      <!-- Include In Appointments -->
      <div class="form-field">
        <label class="field-label">
          <i class="pi pi-calendar-plus"></i>
          Uključi u termine
        </label>
        <p-select 
          formControlName="includeInAppoitments"
          [options]="[
            {label: 'Da', value: true},
            {label: 'Ne', value: false}
          ]"
          optionLabel="label"
          optionValue="value"
          placeholder="Izaberite opciju"
          styleClass="w-full">
        </p-select>
      </div>
    </form>
  </div>

  <!-- Actions -->
  <div class="admin-dialog__actions">
    <p-button 
      label="Odustani" 
      [text]="true"
      (onClick)="closeDialog()">
    </p-button>
    <p-button 
      label="Kreiraj zaposlenog" 
      (onClick)="createEmployee()" 
      [disabled]="employeeForm.invalid">
    </p-button>
  </div>
</div>
