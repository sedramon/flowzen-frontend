<div [@dialogPop] class="admin-dialog">
  <!-- Header -->
  <div class="admin-dialog__header">
    <div class="admin-dialog__icon">
      <i class="pi pi-user-plus"></i>
    </div>
    <div class="admin-dialog__title">
      <h2>Novi korisnik</h2>
      <p>Kreirajte novi korisni훾ki nalog</p>
    </div>
  </div>
  
  <!-- Content -->
  <div class="admin-dialog__content">
    <form [formGroup]="userForm" class="form-grid">
      <!-- Name -->
      <div class="form-field">
        <label class="field-label">
          <i class="pi pi-user"></i>
          Ime
        </label>
        <input 
          pInputText 
          formControlName="name" 
          placeholder="Unesite ime i prezime"
          class="p-inputtext-lg w-full" />
        <small class="p-error" *ngIf="userForm.controls['name'].touched && userForm.controls['name'].hasError('required')">
          Ime je obavezno
        </small>
      </div>

      <!-- Role -->
      <div class="form-field">
        <label class="field-label">
          <i class="pi pi-shield"></i>
          Uloga
        </label>
        <p-select 
          formControlName="role"
          [options]="roleOptions"
          optionLabel="label"
          optionValue="value"
          placeholder="Izaberite ulogu"
          [appendTo]="'body'"
          styleClass="w-full">
        </p-select>
        <small class="p-error" *ngIf="userForm.controls['role'].touched && userForm.controls['role'].hasError('required')">
          Uloga je obavezna
        </small>
      </div>

      <!-- Email - full width -->
      <div class="form-field full-width">
        <label class="field-label">
          <i class="pi pi-envelope"></i>
          Email
        </label>
        <input 
          pInputText 
          type="email"
          formControlName="email" 
          placeholder="primer@email.com"
          class="p-inputtext-lg w-full" />
        <small class="p-error" *ngIf="userForm.controls['email'].touched && userForm.controls['email'].hasError('required')">
          Email je obavezan
        </small>
        <small class="p-error" *ngIf="userForm.controls['email'].touched && userForm.controls['email'].hasError('email')">
          Unesite validan email
        </small>
      </div>

      <!-- Password - full width -->
      <div class="form-field full-width">
        <label class="field-label">
          <i class="pi pi-lock"></i>
          Lozinka
        </label>
        <p-password 
          formControlName="password" 
          placeholder="Unesite lozinku"
          [toggleMask]="true"
          [feedback]="false"
          styleClass="w-full"
          inputStyleClass="w-full">
        </p-password>
        <small class="field-hint">Lozinka mora sadr탑ati najmanje 8 karaktera, 1 broj i 1 specijalni karakter</small>
        <small class="p-error" *ngIf="userForm.controls['password'].touched && userForm.controls['password'].hasError('required')">
          Lozinka je obavezna
        </small>
        <small class="p-error" *ngIf="userForm.controls['password'].touched && userForm.controls['password'].hasError('minlength')">
          Lozinka mora sadr탑ati najmanje 8 karaktera
        </small>
        <small class="p-error" *ngIf="userForm.controls['password'].touched && userForm.controls['password'].hasError('pattern')">
          Lozinka mora sadr탑ati najmanje 1 broj i 1 specijalni karakter
        </small>
      </div>
    </form>
  </div>

  <!-- Actions -->
  <div class="admin-dialog__actions">
    <p-button 
      label="Odustani" 
      [text]="true"
      (onClick)="closeDialog()">
    </p-button>
    <p-button 
      label="Kreiraj korisnika" 
      (onClick)="createUser()" 
      [disabled]="userForm.invalid">
    </p-button>
  </div>
</div>
