<div class="dialog-container">
  <h2 mat-dialog-title>Edit Role</h2>

  <form [formGroup]="roleForm" mat-dialog-content fxLayout="column" fxLayoutGap="16px">
    <!-- 1) Role Name -->
    <mat-form-field appearance="outline" style="width: 100%">
      <mat-label>Role Name</mat-label>
      <input matInput formControlName="name" placeholder="Enter role name" />
      <mat-error *ngIf="roleForm.controls.name.hasError('required')">
        Role Name is required
      </mat-error>
    </mat-form-field>

    <!-- 2) Select Module / Entity -->
    <mat-form-field appearance="outline" style="width: 100%">
      <mat-label>Select Module</mat-label>
      <mat-select formControlName="entity">
        <mat-option *ngFor="let ent of uniqueEntities" [value]="ent">
          {{ ent }}
        </mat-option>
      </mat-select>
      <mat-error *ngIf="roleForm.controls.entity.hasError('required')">
        Module is required
      </mat-error>
    </mat-form-field>

    <!-- 3) Action Checkboxes -->
    <div *ngIf="roleForm.controls.entity.value" formGroupName="actions" class="actions-container">
      <div class="actions-grid">
        <mat-checkbox *ngFor="let action of availableActions"
                      [formControlName]="action"
                      [matTooltip]="getActionTooltip(action)"
                      matTooltipPosition="above"
                      class="action-checkbox">
          <mat-icon class="action-icon">
            {{ {
              access: 'lock_open',
              read: 'visibility',
              create: 'add',
              update: 'edit',
              delete: 'delete',
              sale: 'point_of_sale',
              refund: 'undo',
              session: 'event',
              report: 'bar_chart',
              settings: 'settings',
              cash_management: 'account_balance',
              cash_reports: 'assessment',
              cash_analytics: 'analytics'
            }[action] || 'check_box'}}
          </mat-icon>
          <span class="action-text">{{ getActionDisplayText(action) }}</span>
        </mat-checkbox>
      </div>
    </div>
  </form>

  <div mat-dialog-actions fxLayout="row" fxLayoutAlign="space-between center" class="mat-dialog-buttons">
    <button mat-raised-button color="primary" [disabled]="roleForm.invalid" (click)="save()">
      <mat-icon>save</mat-icon>Save
    </button>
    <button mat-raised-button (click)="cancel()"><mat-icon>cancel</mat-icon>Cancel</button>
  </div>
</div>