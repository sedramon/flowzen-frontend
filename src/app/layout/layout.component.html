<nav class="navbar">
  <div class="navbar-content">
    <!-- Logo and Brand -->
    <div class="navbar-brand">
      <img src="/flowzen-logo.png" alt="flowzen" class="logo">
      <span class="brand-title">Flowzen</span>
    </div>

    <!-- Navigation Items -->
    <div class="navbar-menu">
      @if (authService.isModuleEnabled('scope_home:access')) {
        <p-button 
          icon="pi pi-home" 
          [text]="true"
          [rounded]="true"
          pTooltip="Početna" 
          tooltipPosition="bottom"
          routerLink="/home" 
          routerLinkActive="active-nav"
          class="nav-btn">
        </p-button>
      }

      @if (authService.isModuleEnabled('scope_client_dashboard:access')) {
        <p-button 
          icon="pi pi-chart-line" 
          [text]="true"
          [rounded]="true"
          pTooltip="Korisnička tabla" 
          tooltipPosition="bottom"
          routerLink="/client-dashboard" 
          routerLinkActive="active-nav"
          class="nav-btn">
        </p-button>
      }

      @if (authService.isModuleEnabled('scope_appointments:access')) {
        <p-button 
          icon="pi pi-calendar" 
          [text]="true"
          [rounded]="true"
          pTooltip="Zakazivanja" 
          tooltipPosition="bottom"
          routerLink="/appointments" 
          routerLinkActive="active-nav"
          class="nav-btn">
        </p-button>
      }

      @if (authService.isModuleEnabled('scope_working_shifts:access')) {
        <p-button 
          icon="pi pi-calendar-clock" 
          [text]="true"
          [rounded]="true"
          pTooltip="Radne smene" 
          tooltipPosition="bottom"
          routerLink="/working-shifts" 
          routerLinkActive="active-nav"
          class="nav-btn">
        </p-button>
      }

      @if (authService.isModuleEnabled('scope_clients:access')) {
        <p-button 
          icon="pi pi-users" 
          [text]="true"
          [rounded]="true"
          pTooltip="Klijenti" 
          tooltipPosition="bottom"
          routerLink="/clients" 
          routerLinkActive="active-nav"
          class="nav-btn">
        </p-button>
      }

      @if (authService.isModuleEnabled('scope_employees:access')) {
        <p-button 
          icon="pi pi-id-card" 
          [text]="true"
          [rounded]="true"
          pTooltip="Zaposleni" 
          tooltipPosition="bottom"
          routerLink="/employees" 
          routerLinkActive="active-nav"
          class="nav-btn">
        </p-button>
      }

      @if (authService.isModuleEnabled('scope_user_administration:access')) {
        <p-button 
          icon="pi pi-shield" 
          [text]="true"
          [rounded]="true"
          pTooltip="Administracija korisnika" 
          tooltipPosition="bottom"
          routerLink="/user-administration" 
          routerLinkActive="active-nav"
          class="nav-btn">
        </p-button>
      }

      @if (authService.isModuleEnabled('scope_services:access')) {
        <p-button 
          icon="pi pi-briefcase" 
          [text]="true"
          [rounded]="true"
          pTooltip="Usluge" 
          tooltipPosition="bottom"
          routerLink="/services" 
          routerLinkActive="active-nav"
          class="nav-btn">
        </p-button>
      }

      @if (authService.isModuleEnabled('scope_articles:access')) {
        <p-button 
          icon="pi pi-box" 
          [text]="true"
          [rounded]="true"
          pTooltip="Artikli" 
          tooltipPosition="bottom"
          routerLink="/articles" 
          routerLinkActive="active-nav"
          class="nav-btn">
        </p-button>
      }

      @if (authService.isModuleEnabled('scope_suppliers:access')) {
        <p-button 
          icon="pi pi-truck" 
          [text]="true"
          [rounded]="true"
          pTooltip="Dobavljači" 
          tooltipPosition="bottom"
          routerLink="/suppliers" 
          routerLinkActive="active-nav"
          class="nav-btn">
        </p-button>
      }

      @if (authService.isModuleEnabled('scope_settings:access')) {
        <p-button 
          icon="pi pi-cog" 
          [text]="true"
          [rounded]="true"
          pTooltip="Podešavanja" 
          tooltipPosition="bottom"
          routerLink="/settings" 
          routerLinkActive="active-nav"
          class="nav-btn">
        </p-button>
      }

      @if (showPosMenu) {
        <p-button 
          icon="pi pi-shopping-cart" 
          label="POS"
          [text]="true"
          [rounded]="true"
          (click)="togglePosMenu(posMenu, $event)"
          class="nav-btn pos-btn">
        </p-button>
        <p-menu #posMenu [model]="posMenuItems" [popup]="true" appendTo="body"></p-menu>
      }

      @if (authService.isGlobalAdmin()) {
        <p-button 
          icon="pi pi-globe" 
          label="Global Admin"
          [outlined]="true"
          [rounded]="true"
          pTooltip="Globalna administracija" 
          tooltipPosition="bottom"
          routerLink="/admin" 
          routerLinkActive="active-nav"
          class="nav-btn global-admin-btn">
        </p-button>
      }
    </div>

    <!-- User Section -->
    <div class="navbar-user">
      <div class="user-info">
        <span class="user-name-navbar">{{ currentUser?.name }}</span>
      </div>
      <p-avatar 
        icon="pi pi-user" 
        shape="circle"
        class="user-avatar">
      </p-avatar>
      <p-button 
        icon="pi pi-sign-out" 
        label="Odjava"
        severity="danger"
        [rounded]="true"
        (click)="logout()"
        class="logout-btn">
      </p-button>
    </div>
  </div>
</nav>

<div class="main-content">
  <router-outlet></router-outlet>
</div>