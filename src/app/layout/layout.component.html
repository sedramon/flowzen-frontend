<mat-toolbar color="primary" class="topbar">
  <div class="menu-content">
    <img src="/flowzen-logo.png" alt="flowzen" width="50">
    <span class="app-title">Flowzen</span>

    @if (authService.isModuleEnabled('scope_home:access')) {
      <button mat-icon-button matTooltip="Home" matTooltipPosition="below"
        routerLink="/home" routerLinkActive="active" class="nav-btn">
        <mat-icon>home</mat-icon>
      </button>
    }

    @if (authService.isModuleEnabled('scope_client_dashboard:access')) {
      <button mat-icon-button matTooltip="Client Dashboard" matTooltipPosition="below"
        routerLink="/client-dashboard" routerLinkActive="active" class="nav-btn">
        <mat-icon>dashboard</mat-icon>
      </button>
    }

    @if (authService.isModuleEnabled('scope_appointments:access')) {
      <button mat-icon-button matTooltip="Appointments" matTooltipPosition="below"
        routerLink="/appointments" routerLinkActive="active" class="nav-btn">
        <mat-icon>event</mat-icon>
      </button>
    }

    @if (authService.isModuleEnabled('scope_working_shifts:access')) {
      <button mat-icon-button matTooltip="Working Shifts" matTooltipPosition="below"
        routerLink="/working-shifts" routerLinkActive="active" class="nav-btn">
        <mat-icon>calendar_month</mat-icon>
      </button>
    }

    @if (authService.isModuleEnabled('scope_clients:access')) {
      <button mat-icon-button matTooltip="Clients" matTooltipPosition="below"
        routerLink="/clients" routerLinkActive="active" class="nav-btn">
        <mat-icon>sentiment_very_satisfied</mat-icon>
      </button>
    }

    @if (authService.isModuleEnabled('scope_employees:access')) {
      <button mat-icon-button matTooltip="Employees" matTooltipPosition="below"
        routerLink="/employees" routerLinkActive="active" class="nav-btn">
        <mat-icon>supervisor_account</mat-icon>
      </button>
    }

    @if (authService.isModuleEnabled('scope_user_administration:access')) {
      <button mat-icon-button matTooltip="User Administration" matTooltipPosition="below"
        routerLink="/user-administration" routerLinkActive="active" class="nav-btn">
        <mat-icon>admin_panel_settings</mat-icon>
      </button>
    }

    @if (authService.isModuleEnabled('scope_services:access')) {
      <button mat-icon-button matTooltip="Services" matTooltipPosition="below"
        routerLink="/services" routerLinkActive="active" class="nav-btn">
        <mat-icon>content_cut</mat-icon>
      </button>
    }

    @if (authService.isModuleEnabled('scope_articles:access')) {
      <button mat-icon-button matTooltip="Articles" matTooltipPosition="below"
        routerLink="/articles" routerLinkActive="active" class="nav-btn">
        <mat-icon>article</mat-icon>
      </button>
    }

    @if (authService.isModuleEnabled('scope_suppliers:access')) {
      <button mat-icon-button matTooltip="Suppliers" matTooltipPosition="below"
        routerLink="/suppliers" routerLinkActive="active" class="nav-btn">
        <mat-icon>local_shipping</mat-icon>
      </button>
    }

    @if (authService.isModuleEnabled('scope_settings:access')) {
      <button mat-icon-button matTooltip="Settings" matTooltipPosition="below"
        routerLink="/settings" routerLinkActive="active" class="nav-btn">
        <mat-icon>settings</mat-icon>
      </button>
    }

    @if (authService.isModuleEnabled('scope_pos:sale')) {
      <button mat-button [matMenuTriggerFor]="posMenu" class="nav-btn text-btn">
        POS
        <mat-icon>arrow_drop_down</mat-icon>
      </button>
    }
    <mat-menu #posMenu="matMenu">
      <button mat-menu-item routerLink="/pos/sales" routerLinkActive="active">
        <mat-icon>point_of_sale</mat-icon>
        <span>Prodaja</span>
      </button>
      @if (authService.isModuleEnabled('scope_pos:cash_management')) {
        <button mat-menu-item routerLink="/pos/cash-management" routerLinkActive="active">
          <mat-icon>account_balance</mat-icon>
          <span>Cash Management</span>
        </button>
      }
      @if (authService.isModuleEnabled('scope_pos:report')) {
        <button mat-menu-item routerLink="/pos/reports" routerLinkActive="active">
          <mat-icon>assessment</mat-icon>
          <span>Izveštaji</span>
        </button>
      }
      @if (authService.isModuleEnabled('scope_pos:cash_reports')) {
        <button mat-menu-item routerLink="/pos/cash-reports" routerLinkActive="active">
          <mat-icon>assessment</mat-icon>
          <span>Cash Izveštaji</span>
        </button>
      }
      @if (authService.isModuleEnabled('scope_pos:cash_analytics')) {
        <button mat-menu-item routerLink="/pos/cash-analytics" routerLinkActive="active">
          <mat-icon>analytics</mat-icon>
          <span>Cash Analitika</span>
        </button>
      }
      @if (authService.isModuleEnabled('scope_pos:settings')) {
        <button mat-menu-item routerLink="/pos/settings" routerLinkActive="active">
          <mat-icon>settings</mat-icon>
          <span>POS Podešavanja</span>
        </button>
      }
    </mat-menu>

    @if (authService.isGlobalAdmin()) {
      <button mat-button matTooltip="Global Administration"
        matTooltipPosition="below" routerLink="/admin" routerLinkActive="active" class="nav-btn text-btn global-admin-btn">
        <mat-icon>public</mat-icon>
        <span>Global Admin</span>
      </button>
    }
  </div>

  <div fxLayout="row" fxLayoutAlign="end center" class="toolbar-right">
    <span>{{ currentUser?.username }}</span>
    <button mat-icon-button>
      <mat-icon>account_circle</mat-icon>
    </button>
    <button mat-raised-button style="background-color: red; color: white; margin-left: 10px;" class="logout-btn"
      (click)="logout()">
      <mat-icon>exit_to_app</mat-icon>Logout</button>
  </div>
</mat-toolbar>

<div class="main-content">
  <router-outlet></router-outlet>
</div>